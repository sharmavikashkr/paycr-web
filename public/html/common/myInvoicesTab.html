<div ng-controller="MyInvoicesController" ng-init="fetchMyInvoices()">
	<br>
	<div class="row">
		<div class="panel text-center">
			<div class="panel-body col-lg-10 col-lg-offset-1">
				<h4>Invoices billed to me</h4>
				<table class="table table-striped table-bordered table-hover table-responsive">
					<thead>
						<tr>
							<th class="text-center">Invoice Code</th>
							<th class="text-center">Amount</th>
							<th class="text-center">Merchant</th>
							<th class="text-center hidden-xs">Status</th>
							<th class="text-center">Action</th>
						</tr>
					</thead>
					<tbody ng-repeat="myinvoice in myinvoices">
						<tr
							ng-class="(myinvoice.status=='PAID')?'success':(myinvoice.status=='EXPIRED')?'basic':(myinvoice.status=='EXPIRED')?'danger':'warning'"
							data-toggle="collapse"
							data-target="#myinfo-{{myinvoice.invoiceCode}}"
							class="accordion-toggle">
							<td>{{myinvoice.invoiceCode}}</td>
							<td><i class="fa fa-rupee"></i> {{myinvoice.payAmount}}</td>
							<td>{{myinvoice.merchant.name}}</td>
							<td class="hidden-xs">{{myinvoice.status}}</td>
							<td>
								<div ng-if="myinvoice.status != 'PAID' && myinvoice.status != 'EXPIRED'">
									<a href="/{{myinvoice.invoiceCode}}" target="_blank" type="button" class="btn btn-xs btn-success">PAY</a>&nbsp; 
									<a ng-if="myinvoice.status != 'DECLINED'" href="/decline/{{myinvoice.invoiceCode}}" target="_blank" type="button" class="btn btn-xs btn-warning">DECLINE</a>
								</div>
							</td>
						</tr>
						<tr>
							<td colspan="12" style="padding: 0px;">
								<div class="accordion-body collapse" id="myinfo-{{myinvoice.invoiceCode}}">
									<div style="padding: 10px;" class="row">
										<div class="panel-body col-lg-12">
											<h4>Items Details</h4>
											<table class="table table-striped table-bordered table-responsive">
												<thead>
													<tr>
														<th class="text-left">Name</th>
														<th class="text-center">Rate</th>
														<th class="text-center">Quantity</th>
														<th class="text-right">Price</th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="item in myinvoice.items">
														<td class="text-left">{{item.name}}</td>
														<td class="text-center"><i class="fa fa-rupee"></i> {{item.rate}}</td>
														<td class="text-center">{{item.quantity}}</td>
														<td class="text-right"><i class="fa fa-rupee"></i> {{item.price}}</td>
													</tr>
													<tr>
														<td></td>
														<td></td>
														<td><strong>Total</strong></td>
														<td class="text-right"><i class="fa fa-rupee"></i> {{myinvoice.total}}</td>
													</tr>
													<tr>
														<td></td>
														<td></td>
														<td><strong>Tax({{myinvoice.tax.name}})</strong></td>
														<td class="text-right">{{myinvoice.tax.value}}%</td>
													</tr>
													<tr>
														<td></td>
														<td></td>
														<td><strong>Discount</strong></td>
														<td class="text-right"><i class="fa fa-rupee"></i> {{myinvoice.discount}}</td>
													</tr>
													<tr>
														<td></td>
														<td></td>
														<td><strong>Pay Amount</strong></td>
														<td class="text-right"><i class="fa fa-rupee"></i> {{myinvoice.payAmount}}</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>